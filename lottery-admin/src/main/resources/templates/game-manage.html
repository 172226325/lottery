<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8">
<title>游戏管理</title>
<link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.1.0/css/bootstrap.min.css">
<script src="https://cdn.staticfile.org/jquery/3.2.1/jquery.min.js"></script>
<script src="http://code.jquery.com/jquery-migrate-1.1.1.js"></script>
<script src="https://cdn.staticfile.org/popper.js/1.12.5/umd/popper.min.js"></script>
<script src="https://cdn.staticfile.org/twitter-bootstrap/4.1.0/js/bootstrap.min.js"></script>
<script src="https://cdn.staticfile.org/vue/2.4.2/vue.min.js"></script>
<script src="https://cdn.staticfile.org/vue-resource/1.5.1/vue-resource.min.js"></script>
<script src="https://cdn.bootcss.com/dayjs/1.7.8/dayjs.min.js"></script>
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.13.1/bootstrap-table.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.13.1/bootstrap-table.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.13.1/locale/bootstrap-table-zh-CN.min.js"></script>
<link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.1.0/css/bootstrap.min.css">
<script src="https://cdn.bootcss.com/zTree.v3/3.5.40/js/jquery.ztree.all.min.js"></script>
<link href="https://cdn.bootcss.com/zTree.v3/3.5.40/css/zTreeStyle/zTreeStyle.css" rel="stylesheet">
<script src="https://cdn.bootcss.com/layer/2.3/layer.js"></script>


<link href="/css/common/common.css" rel="stylesheet" type="text/css">
<style type="text/css">
#betting-order-details-modal .modal-mask {
	position: fixed;
	z-index: 9998;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	display: table;
	transition: opacity .3s ease;
}

#betting-order-details-modal .modal-wrapper {
	display: table-cell;
	vertical-align: middle;
}

.betting-order-details-dialog {
	max-width: 100%;
	width: 70%;
}

.betting-order-details-dialog .modal-body {
	height: 450px;
	overflow: auto;
}

.game-play-summary-title {
	margin-bottom: 20px;
	padding-left: 10px;
	border-left: 3px solid #3080fe;
}

.game-play-details-item label {
	color: #9a9898;
	padding-right: 4px;
}

.game-play-details-highlight {
	color: #E37D23 !important;
}
</style>
</head>

<body>
	<nav class="navbar navbar-expand-sm bg-light">
		<ul class="navbar-nav">
			<li class="nav-item"><a class="nav-link" href="#">彩种管理</a></li>
			<li class="nav-item"><a class="nav-link" href="#">开奖结果</a></li>
			<li class="nav-item"><a class="nav-link" href="#">投注记录</a></li>
		</ul>
	</nav>
	<div id="game-manage" v-cloak>
		<div v-show="showGameManageFlag">
			<form class="form-inline common-query-cond-form float-right">
				<button type="button" class="btn btn-info btn-sm" v-on:click="">新增游戏</button>
			</form>
			<table class="table common-table game-manage-table">
				<thead>
					<tr>
						<th>游戏名称</th>
						<th>游戏代码</th>
						<th>游戏状态</th>
						<th>排序号</th>
						<th>操作</th>
					</tr>
				</thead>
				<tbody>
					<tr v-for="game in games">
						<td>{{game.gameName}}</td>
						<td>{{game.gameCode}}</td>
						<td>{{game.stateName}}</td>
						<td>{{game.orderNo}}</td>
						<td><button type="button" class="btn btn-default btn-sm" v-on:click="toGamePlaySetting(game)">玩法设置</button></td>
					</tr>
				</tbody>
			</table>
		</div>
		<div v-show="!showGameManageFlag">
			<div style="padding-left: 14px; padding-top: 10px; padding-bottom: 14px; padding-right: 10px;">
				<span>{{selectedGame.gameName}}</span> <span style="float: right;">
					<button type="button" class="btn btn-info btn-sm" v-on:click="openAddGamePlayModal">新增玩法</button>
					<button type="button" class="btn btn-sm" v-on:click="backToGameManage">返回</button>
				</span>
			</div>
			<div class="row" style="margin-left: 0; margin-right: 0;">
				<div class="col-sm-3" style="padding-left: 0; padding-right: 0;">
					<div class="card" style="height: 550px;">
						<div class="card-header">全部玩法</div>
						<div class="card-body" style="overflow: auto;">
							<ul id="gamePlayTree" class="ztree"></ul>
						</div>
					</div>
				</div>
				<div class="col-sm-9" style="padding-left: 0; padding-right: 0;">
					<div class="card">
						<div class="card-header">玩法详情</div>
						<div class="card-body">
							<div class="game-play-summary-title" style="">玩法摘要</div>
							<div class="row">
								<div class="col-sm-6 game-play-details-item">
									<label>玩法名称:</label> <span>{{selectedGamePlay.gamePlayName}}</span>
								</div>
								<div class="col-sm-6 game-play-details-item">
									<label>玩法代码:</label> <span>{{selectedGamePlay.gamePlayCode}}</span>
								</div>
							</div>
							<div class="row">
								<div class="col-sm-6 game-play-details-item">
									<label>玩法类别:</label> <span>{{selectedGamePlay.gamePlayCategoryName}}</span>
								</div>
								<div class="col-sm-6 game-play-details-item">
									<label>子玩法类别:</label> <span>{{selectedGamePlay.subGamePlayCategoryName}}</span>
								</div>
							</div>
							<div class="row">
								<div class="col-sm-6 game-play-details-item">
									<label>赔率:</label> <span>{{selectedGamePlay.odds}}</span>
								</div>
								<div class="col-sm-6 game-play-details-item">
									<label>状态:</label> <span class="game-play-details-highlight">{{selectedGamePlay.stateName}}</span>
								</div>
							</div>
							<div class="row">
								<div class="col-sm-6 game-play-details-item">
									<label>游戏代码:</label> <span>{{selectedGamePlay.gameCode}}</span>
								</div>
								<div class="col-sm-6 game-play-details-item">
									<label>排序号:</label> <span>{{selectedGamePlay.orderNo}}</span>
								</div>
							</div>
							<div class="row">
								<div class="col-sm-12 game-play-details-item">
									<label>玩法说明:</label>
								</div>
							</div>
							<div class="row">
								<div class="col-sm-12">
									<div class="game-play-details-highlight" style="margin-left: 70px;" v-html="selectedGamePlay.gamePlayDesc"></div>
								</div>
							</div>
							<div class="game-play-summary-title" style="margin-top: 20px;">号位明细</div>
							<table class="table table-sm common-table">
								<thead>
									<tr>
										<th>号位</th>
										<th>可选号球</th>
										<th>最大可选数量</th>
										<th>快捷按钮</th>
									</tr>
								</thead>
								<tbody>
									<tr v-for="numLocate in selectedGamePlay.numLocates">
										<td>{{numLocate.numLocateName}}</td>
										<td>{{numLocate.nums}}</td>
										<td>{{numLocate.maxSelected}}</td>
										<td>{{numLocate.hasFilterBtnFlag ? '显示': '不显示'}}</td>
									</tr>
								</tbody>
							</table>
							<div style="text-align: center;" v-show="selectedGamePlay.id != null">
								<button type="button" class="btn btn-info btn-sm" v-on:click="updateGamePlayState">{{selectedGamePlay.state == '1' ? '禁用' : '启用'}}</button>
								<button type="button" class="btn btn-success btn-sm" v-on:click="openEditGamePlayModal">编辑</button>
								<button type="button" class="btn btn-danger btn-sm" v-on:click="delGamePlay">删除</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div id="add-or-update-game-modal" v-show="addOrUpdateGameFlag">
			<div class="modal-mask">
				<div class="modal-wrapper">
					<div class="modal-dialog add-or-update-game-dialog">
						<div class="modal-content">
							<div class="modal-header">
								<h5 class="modal-title">{{gamePlayActionTitle}}</h5>
								<button type="button" class="close" data-dismiss="modal" aria-label="Close" v-on:click="addOrUpdateFlag = false">
									<span aria-hidden="true">&times;</span>
								</button>
							</div>
							<div class="modal-body">
								<div class="game-play-summary-title" style="">玩法摘要</div>
								<div class="row">
									<div class="col-sm-6 game-play-details-item">
										<label>玩法名称:</label> <span><input type="text" v-model="editGamePlay.gamePlayName"></span>
									</div>
									<div class="col-sm-6 game-play-details-item">
										<label>玩法代码:</label> <span><input type="text" v-model="editGamePlay.gamePlayCode"></span>
									</div>
								</div>
								<div class="row">
									<div class="col-sm-6 game-play-details-item">
										<label>玩法类别:</label> <span> <input type="text" v-model="editGamePlay.gamePlayCategoryName">
										</span>
									</div>
									<div class="col-sm-6 game-play-details-item">
										<label>子玩法类别:</label> <span> <input type="text" v-model="editGamePlay.subGamePlayCategoryName">
										</span>
									</div>
								</div>
								<div class="row">
									<div class="col-sm-6 game-play-details-item">
										<label>赔率:</label> <span><input type="text" v-model="editGamePlay.odds"></span>
									</div>
									<div class="col-sm-6 game-play-details-item">
										<label>状态:</label> <span class="game-play-details-highlight"> <input type="radio" name="gamePlayStateRadio" v-model="editGamePlay.state" value="1">启用<input type="radio" name="gamePlayStateRadio" v-model="editGamePlay.state" value="0">禁用
										</span>
									</div>
								</div>
								<div class="row">
									<div class="col-sm-6 game-play-details-item">
										<label>游戏代码:</label> <span><input type="text" disabled="disabled" v-model="editGamePlay.gameCode"></span>
									</div>
									<div class="col-sm-6 game-play-details-item">
										<label>排序号:</label> <span><input type="text" v-model="editGamePlay.orderNo"></span>
									</div>
								</div>
								<div class="row">
									<div class="col-sm-12 game-play-details-item">
										<label>玩法说明:</label>
									</div>
								</div>
								<div class="row">
									<div class="col-sm-12">
										<div style="margin-left: 70px;">
											<textarea class="form-control" rows="5" v-model="editGamePlay.gamePlayDesc"></textarea>
										</div>
									</div>
								</div>
								<div class="game-play-summary-title" style="margin-top: 20px;">
									<span>号位明细</span>
									<button type="button" class="btn btn-info btn-sm float-right" v-on:click="addNumLocate">增加号位</button>
								</div>
								<table class="table table-sm common-table">
									<thead>
										<tr>
											<th>号位</th>
											<th>可选号球</th>
											<th>最大可选数量</th>
											<th>快捷按钮</th>
											<th>操作</th>
										</tr>
									</thead>
									<tbody>
										<tr v-for="(numLocate, index) in editGamePlay.numLocates">
											<td><input type="text" v-model="numLocate.numLocateName"></td>
											<td><input type="text" v-model="numLocate.nums"></td>
											<td><input type="text" v-model="numLocate.maxSelected"></td>
											<td><select v-model="numLocate.hasFilterBtnFlag">
													<option value="true">显示</option>
													<option value="false">不显示</option>
											</select></td>
											<td>
												<button type="button" class="btn btn-danger btn-sm" v-on:click="delNumLocate(index)">删除</button>
											</td>
										</tr>
									</tbody>
								</table>
							</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-success btn-sm" v-on:click="addOrUpdateGamePlay">保存</button>
								<button type="button" class="btn btn-sm" v-on:click="addOrUpdateFlag = false">取消</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div id="betting-order-details-modal" v-show="addOrUpdateFlag">
			<div class="modal-mask">
				<div class="modal-wrapper">
					<div class="modal-dialog betting-order-details-dialog">
						<div class="modal-content">
							<div class="modal-header">
								<h5 class="modal-title">{{gamePlayActionTitle}}</h5>
								<button type="button" class="close" data-dismiss="modal" aria-label="Close" v-on:click="addOrUpdateFlag = false">
									<span aria-hidden="true">&times;</span>
								</button>
							</div>
							<div class="modal-body">
								<div class="game-play-summary-title" style="">玩法摘要</div>
								<div class="row">
									<div class="col-sm-6 game-play-details-item">
										<label>玩法名称:</label> <span><input type="text" v-model="editGamePlay.gamePlayName"></span>
									</div>
									<div class="col-sm-6 game-play-details-item">
										<label>玩法代码:</label> <span><input type="text" v-model="editGamePlay.gamePlayCode"></span>
									</div>
								</div>
								<div class="row">
									<div class="col-sm-6 game-play-details-item">
										<label>玩法类别:</label> <span> <input type="text" v-model="editGamePlay.gamePlayCategoryName">
										</span>
									</div>
									<div class="col-sm-6 game-play-details-item">
										<label>子玩法类别:</label> <span> <input type="text" v-model="editGamePlay.subGamePlayCategoryName">
										</span>
									</div>
								</div>
								<div class="row">
									<div class="col-sm-6 game-play-details-item">
										<label>赔率:</label> <span><input type="text" v-model="editGamePlay.odds"></span>
									</div>
									<div class="col-sm-6 game-play-details-item">
										<label>状态:</label> <span class="game-play-details-highlight"> <input type="radio" name="gamePlayStateRadio" v-model="editGamePlay.state" value="1">启用<input type="radio" name="gamePlayStateRadio" v-model="editGamePlay.state" value="0">禁用
										</span>
									</div>
								</div>
								<div class="row">
									<div class="col-sm-6 game-play-details-item">
										<label>游戏代码:</label> <span><input type="text" disabled="disabled" v-model="editGamePlay.gameCode"></span>
									</div>
									<div class="col-sm-6 game-play-details-item">
										<label>排序号:</label> <span><input type="text" v-model="editGamePlay.orderNo"></span>
									</div>
								</div>
								<div class="row">
									<div class="col-sm-12 game-play-details-item">
										<label>玩法说明:</label>
									</div>
								</div>
								<div class="row">
									<div class="col-sm-12">
										<div style="margin-left: 70px;">
											<textarea class="form-control" rows="5" v-model="editGamePlay.gamePlayDesc"></textarea>
										</div>
									</div>
								</div>
								<div class="game-play-summary-title" style="margin-top: 20px;">
									<span>号位明细</span>
									<button type="button" class="btn btn-info btn-sm float-right" v-on:click="addNumLocate">增加号位</button>
								</div>
								<table class="table table-sm common-table">
									<thead>
										<tr>
											<th>号位</th>
											<th>可选号球</th>
											<th>最大可选数量</th>
											<th>快捷按钮</th>
											<th>操作</th>
										</tr>
									</thead>
									<tbody>
										<tr v-for="(numLocate, index) in editGamePlay.numLocates">
											<td><input type="text" v-model="numLocate.numLocateName"></td>
											<td><input type="text" v-model="numLocate.nums"></td>
											<td><input type="text" v-model="numLocate.maxSelected"></td>
											<td><select v-model="numLocate.hasFilterBtnFlag">
													<option value="true">显示</option>
													<option value="false">不显示</option>
											</select></td>
											<td>
												<button type="button" class="btn btn-danger btn-sm" v-on:click="delNumLocate(index)">删除</button>
											</td>
										</tr>
									</tbody>
								</table>
							</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-success btn-sm" v-on:click="addOrUpdateGamePlay">保存</button>
								<button type="button" class="btn btn-sm" v-on:click="addOrUpdateFlag = false">取消</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<script src="/js/game-manage.js"></script>
</body>
</html>